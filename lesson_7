import time
import random

class LegalAPI:
    """
    –ö–ª–∞—Å—Å –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–º API (–ï–ì–†–Æ–õ/–ï–ì–†–Æ–õ/–ï–§–†–°–ë).
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ mock-–¥–∞–Ω–Ω—ã–µ ‚Äî –¥–ª—è —É—á–µ–±–Ω—ã—Ö –∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ü–µ–ª–µ–π.
    –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏, –æ–±—É—á–µ–Ω–∏—è, –∑–∞—â–∏—Ç—ã –ø—Ä–æ–µ–∫—Ç–æ–≤.
    """

    def __init__(self, token=None):
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞.
        :param token: —Ç–æ–∫–µ–Ω (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ‚Äî –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –∑–∞–¥–∞–Ω–∏–µ–º)
        """
        self.token = token
        if token:
            print(f"üîë –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω: {token[:5]}... (—É—á–µ–±–Ω—ã–π —Ä–µ–∂–∏–º)")

    def get_organization_by_inn(self, inn):
        """
        –ò–º–∏—Ç–∏—Ä—É–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ–± –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ –ò–ù–ù.
        :param inn: –ò–ù–ù (—Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ —á–∏—Å–ª–æ)
        :return: —Å–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–ª–∏ None
        """
        print(f"üîç –ó–∞–ø—Ä–∞—à–∏–≤–∞—é –¥–∞–Ω–Ω—ã–µ –ø–æ –ò–ù–ù {inn} (–∏–º–∏—Ç–∞—Ü–∏—è API)...")
        time.sleep(0.3)  # –∏–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ —Å–µ—Ç–∏

        # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Å—Ç—Ä–æ–∫—É
        inn = str(inn).strip()

        # –ó–∞—Ä–∞–Ω–µ–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ mock-–¥–∞–Ω–Ω—ã–µ
        mock_data = {
            "7704212560": {
                "type": "–Æ—Ä–ª–∏—Ü–æ",
                "full_name": "–û–ë–©–ï–°–¢–í–û –° –û–ì–†–ê–ù–ò–ß–ï–ù–ù–û–ô –û–¢–í–ï–¢–°–¢–í–ï–ù–ù–û–°–¢–¨–Æ \"–°–¢–†–û–ô–≠–ö–°–ü–ï–†–¢\"",
                "short_name": "–û–û–û \"–°–¢–†–û–ô–≠–ö–°–ü–ï–†–¢\"",
                "inn": "7704212560",
                "ogrn": "1027700012345",
                "status": "–î–µ–π—Å—Ç–≤—É—é—â–∞—è",
                "reg_date": "2002-07-15",
                "address": "119017, –≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ë–æ–ª—å—à–∞—è –û—Ä–¥—ã–Ω–∫–∞, –¥. 23"
            },
            "7719479487": {
                "type": "–Æ—Ä–ª–∏—Ü–æ",
                "full_name": "–ê–ö–¶–ò–û–ù–ï–†–ù–´–ô –ö–û–ú–ú–ï–†–ß–ï–°–ö–ò–ô –ë–ê–ù–ö \"–ì–ê–ó–ü–†–û–ú–ë–ê–ù–ö\" (–ü–£–ë–õ–ò–ß–ù–û–ï –ê–ö–¶–ò–û–ù–ï–†–ù–û–ï –û–ë–©–ï–°–¢–í–û)",
                "short_name": "–ê–ö–ë \"–ì–ê–ó–ü–†–û–ú–ë–ê–ù–ö\" (–ü–ê–û)",
                "inn": "7719479487",
                "ogrn": "1027700067890",
                "status": "–î–µ–π—Å—Ç–≤—É—é—â–∞—è",
                "reg_date": "1990-11-05",
                "address": "117420, –≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ù–∞–º—ë—Ç–∫–∏–Ω–∞, –¥. 16"
            },
            "770707463278": {
                "type": "–ò–ü",
                "full_name": "–ü–µ—Ç—Ä–æ–≤ –ü—ë—Ç—Ä –ü–µ—Ç—Ä–æ–≤–∏—á",
                "inn": "770707463278",
                "ogrnip": "315774600012345",
                "status": "–î–µ–π—Å—Ç–≤—É—é—â–∏–π",
                "reg_date": "2015-03-12",
                "address": "–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10, –∫–≤. 5"
            },
            "502717774560": {
                "type": "–ò–ü",
                "full_name": "–°–∏–¥–æ—Ä–æ–≤–∞ –ê–Ω–Ω–∞ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞",
                "inn": "502717774560",
                "ogrnip": "320502700012345",
                "status": "–ü—Ä–µ–∫—Ä–∞—â–µ–Ω–∞",
                "reg_date": "2020-08-17",
                "address": "–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª., –≥. –•–∏–º–∫–∏, —É–ª. –ú–∏—Ä–∞, –¥. 7"
            }
        }

        # –ï—Å–ª–∏ –ò–ù–ù –µ—Å—Ç—å –≤ mock-–¥–∞–Ω–Ω—ã—Ö ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ–º
        if inn in mock_data:
            print(f"‚úÖ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã –¥–ª—è –ò–ù–ù {inn}")
            return mock_data[inn]
        else:
            print(f"‚ùå –ò–ù–ù {inn} –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —É—á–µ–±–Ω–æ–π –±–∞–∑–µ")
            return None

    def get_efrsb_publications_by_inn(self, inn):
        """
        –ò–º–∏—Ç–∏—Ä—É–µ—Ç –ø–æ–∏—Å–∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–π –≤ –ï–§–†–°–ë –ø–æ –ò–ù–ù.
        :param inn: –ò–ù–ù
        :return: —Å–ø–∏—Å–æ–∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–π
        """
        print(f"üì∞ –ò—â—É –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ –ï–§–†–°–ë –ø–æ –ò–ù–ù {inn}...")
        time.sleep(0.3)

        mock_publications = {
            "7704212560": [
                {
                    "id": "pub-12345",
                    "title": "–°–æ–æ–±—â–µ–Ω–∏–µ –æ –≤–æ–∑–±—É–∂–¥–µ–Ω–∏–∏ –¥–µ–ª–∞ –æ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–µ",
                    "date": "2024-03-10",
                    "type": "–ë–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–æ",
                    "url": "https://fedresurs.ru/publication/pub-12345"
                },
                {
                    "id": "pub-12346",
                    "title": "–°–æ–æ–±—â–µ–Ω–∏–µ –æ –≤–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è",
                    "date": "2024-04-05",
                    "type": "–ù–∞–±–ª—é–¥–µ–Ω–∏–µ",
                    "url": "https://fedresurs.ru/publication/pub-12346"
                }
            ],
            "7719479487": []  # —É –±–∞–Ω–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–π –Ω–µ—Ç
        }

        inn = str(inn)
        return mock_publications.get(inn, [])

    def print_organization_info(self, org):
        """
        –ö—Ä–∞—Å–∏–≤–æ –≤—ã–≤–æ–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏.
        :param org: —Å–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏
        """
        if not org:
            print("‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.")
            return

        print(f"\n{'='*60}")
        print("üè¢ –î–ê–ù–ù–´–ï –û–†–ì–ê–ù–ò–ó–ê–¶–ò–ò (–ò–ú–ò–¢–ê–¶–ò–Ø API)")
        print("="*60)
        for key, value in org.items():
            display_key = key.replace('_', ' ').title()
            print(f"üîπ {display_key:12}: {value}")
        print("="*60)

    def print_publications(self, pubs):
        """
        –í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–π.
        :param pubs: —Å–ø–∏—Å–æ–∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–π
        """
        if not pubs:
            print("üì∞ –ü—É–±–ª–∏–∫–∞—Ü–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.")
            return

        print(f"\nüì∞ –ù–ê–ô–î–ï–ù–û {len(pubs)} –ü–£–ë–õ–ò–ö–ê–¶–ò–ô:")
        for pub in pubs:
            print(f"\n   üìÑ {pub['title']}")
            print(f"   üìÖ {pub['date']} | üè∑Ô∏è {pub['type']}")
            print(f"   üîó {pub['url']}")


# ==========================
# üí° –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
# ==========================
if __name__ == "__main__":
    # –¢–æ–∫–µ–Ω –∏–∑ –∑–∞–¥–∞–Ω–∏—è (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
    TOKEN = "4123saedfasedfsadf4324234f223ddf23"
    api = LegalAPI(TOKEN)

    # –¢–µ—Å—Ç–æ–≤—ã–µ –ò–ù–ù
    test_inns = [
        "7704212560",   # –û–û–û "–°–¢–†–û–ô–≠–ö–°–ü–ï–†–¢" ‚Äî –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ
        "7719479487",   # –ì–ê–ó–ü–†–û–ú–ë–ê–ù–ö ‚Äî –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ
        "770707463278", # –ò–ü –ü–µ—Ç—Ä–æ–≤ ‚Äî –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ
        "502717774560", # –ò–ü –°–∏–¥–æ—Ä–æ–≤–∞ ‚Äî –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ
        "1234567890"    # –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –ò–ù–ù ‚Äî –Ω–µ –Ω–∞–π–¥–µ–Ω
    ]

    for inn in test_inns:
        print(f"\n{'='*70}")
        # –ü–æ–ª—É—á–∞–µ–º –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é
        org = api.get_organization_by_inn(inn)
        api.print_organization_info(org)

        # –ü–æ–ª—É—á–∞–µ–º –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
        pubs = api.get_efrsb_publications_by_inn(inn)
        api.print_publications(pubs)
