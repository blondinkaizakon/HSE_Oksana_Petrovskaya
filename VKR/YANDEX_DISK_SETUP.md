# Настройка Яндекс.Диска для сохранения регистрационных данных

## Шаг 1: Создание приложения в Яндекс.OAuth

1. Перейдите на https://oauth.yandex.ru/
2. Нажмите "Зарегистрировать новое приложение"
3. Заполните форму:
   - **Название**: ЛегалФлоу
   - **Платформы**: Веб-сервисы
   - **Redirect URI**: `http://localhost:3000/yandex-disk-callback` (для разработки) или ваш домен для продакшена
4. Сохраните полученные данные:
   - **Client ID** (Идентификатор приложения)
   - **Client Secret** (Секретный ключ)

## Шаг 2: Настройка переменных окружения

Создайте файл `.env` в корне проекта:

```env
VITE_YANDEX_DISK_CLIENT_ID=ваш_client_id
VITE_YANDEX_DISK_CLIENT_SECRET=ваш_client_secret
VITE_YANDEX_DISK_REDIRECT_URI=http://localhost:3000/yandex-disk-callback
VITE_YANDEX_DISK_TOKEN=ваш_oauth_токен (опционально, можно получить через OAuth flow)
```

## Шаг 3: Получение OAuth токена

### Вариант 1: Автоматический (через браузер)

1. При первом сохранении данных система автоматически перенаправит на страницу авторизации Яндекс
2. Пользователь авторизуется и дает разрешения
3. Токен сохранится автоматически в localStorage

### Вариант 2: Ручной (для администратора)

1. Откройте в браузере:
```
https://oauth.yandex.ru/authorize?response_type=code&client_id=ВАШ_CLIENT_ID&redirect_uri=ВАШ_REDIRECT_URI
```

2. Авторизуйтесь и скопируйте код из URL после редиректа
3. Обменяйте код на токен через API или используйте токен напрямую

## Шаг 4: Структура таблицы на Яндекс.Диске

Таблица будет создана автоматически в папке `/ЛегалФлоу/` на Яндекс.Диске с именем `Регистрации_ЛегалФлоу.csv`

Структура таблицы:
- Дата регистрации
- Email пользователя
- Согласие на обработку ПД
- Согласие на рекламные рассылки
- Имя
- Компания
- Должность
- Телефон
- Отрасль
- Количество сотрудников

## Шаг 5: Настройка прав доступа

Убедитесь, что приложение запрашивает следующие права:
- `cloud_api:disk.app_folder` - доступ к папке приложения
- `cloud_api:disk.write` - запись файлов

## Примечания

- Токен хранится в localStorage браузера
- Для продакшена рекомендуется использовать серверный прокси для работы с Яндекс.Диском API
- При отсутствии токена данные сохраняются только в localStorage, ошибка не блокирует регистрацию

