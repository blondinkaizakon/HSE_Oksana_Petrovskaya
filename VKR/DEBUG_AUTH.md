# Отладка проблемы аутентификации

## Проблема: "Пользователь с таким email не найден"

### Возможные причины:

1. **Пользователь не зарегистрирован**
   - Решение: Зарегистрируйтесь через форму регистрации

2. **localStorage был очищен**
   - Решение: Зарегистрируйтесь заново

3. **Email введен с ошибкой**
   - Проверьте правильность написания email
   - Убедитесь, что нет лишних пробелов

4. **Проблема с регистром букв**
   - Код автоматически нормализует email (приводит к нижнему регистру)
   - Но если данные были сохранены до обновления кода, может быть несоответствие

### Как проверить:

1. Откройте консоль браузера (F12)
2. Выполните в консоли:
   ```javascript
   // Проверить всех пользователей
   console.log('Users:', JSON.parse(localStorage.getItem('users') || '{}'));
   
   // Проверить текущего пользователя
   console.log('Current user:', localStorage.getItem('currentUser'));
   
   // Очистить данные (если нужно начать заново)
   // localStorage.clear();
   ```

3. Если `users` пустой объект `{}`, значит пользователи не зарегистрированы

### Решение:

1. **Если вы новый пользователь:**
   - Нажмите "Зарегистрироваться"
   - Введите email и пароль (минимум 6 символов)
   - После регистрации вы автоматически войдете в систему

2. **Если вы забыли, зарегистрированы ли вы:**
   - Попробуйте зарегистрироваться с тем же email
   - Если появится ошибка "Пользователь с таким email уже зарегистрирован" - значит вы зарегистрированы
   - Используйте форму входа

3. **Если нужно начать заново:**
   - Откройте консоль браузера (F12)
   - Выполните: `localStorage.clear()`
   - Обновите страницу
   - Зарегистрируйтесь заново

### Технические детали:

- Данные пользователей хранятся в `localStorage` под ключом `'users'`
- Формат: `{ "email@example.com": { email: "...", password: "...", registeredAt: "..." } }`
- Email автоматически нормализуется (приводится к нижнему регистру)
- Текущий пользователь сохраняется в `localStorage` под ключом `'currentUser'`

### Улучшения в коде:

- Добавлена проверка на пустую базу пользователей
- Улучшена обработка ошибок парсинга JSON
- Добавлены более информативные сообщения об ошибках
- Добавлено логирование ошибок в консоль для отладки

