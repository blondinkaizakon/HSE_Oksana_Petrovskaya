# Диагностика: приложение не отвечает на запросы

## Возможные проблемы

### 1. Браузер не может обратиться к API
**Проблема:** Если приложение открыто по IP (92.53.104.183:3000), браузер пытается обратиться к localhost:8001, который недоступен.

**Решение:** Использовать IP сервера для API: `http://92.53.104.183:8001`

### 2. Медленная генерация
**Проблема:** Модель на CPU генерирует очень медленно (15-30 секунд для короткого ответа).

**Решение:** 
- Уменьшено max_new_tokens до 150
- Добавлен таймаут 3 минуты
- Асинхронная генерация через executor

### 3. CORS проблемы
**Проверка:**
```bash
curl -X OPTIONS http://92.53.104.183:8001/generate \
  -H "Origin: http://92.53.104.183:3000" \
  -H "Access-Control-Request-Method: POST" -v
```

### 4. Парсинг ответа
**Проблема:** Модель может не возвращать строгий JSON.

**Решение:** Улучшен парсинг с fallback на структурированный ответ.

## Что проверить

1. Откройте DevTools (F12) в браузере
2. Вкладка Network - проверьте запросы к API
3. Вкладка Console - проверьте ошибки JavaScript
4. Проверьте, что API доступен: http://92.53.104.183:8001/health

## Быстрая проверка

```bash
# Проверить API
curl http://92.53.104.183:8001/health

# Проверить генерацию (может занять время)
curl -X POST http://92.53.104.183:8001/generate \
  -H "Content-Type: application/json" \
  -d '{"prompt": "Тест", "max_new_tokens": 20}'
```

## Исправления применены

✅ API слушает на 0.0.0.0:8001 (доступен по IP)
✅ CORS настроен для всех источников
✅ Добавлены таймауты
✅ Уменьшено количество токенов для ускорения
✅ Асинхронная генерация

## Следующие шаги

1. Перезагрузите страницу приложения
2. Откройте DevTools (F12)
3. Проверьте ошибки в Console
4. Проверьте запросы в Network

