# โ RAG ะธะฝัะตะณัะฐัะธั ะทะฐะฒะตััะตะฝะฐ

## ๐ ะงัะพ ัะดะตะปะฐะฝะพ

### 1. โ RAG API ะทะฐะฟััะตะฝ
- **ะะพัั:** 8002
- **URL:** `http://localhost:8002`
- **ะกัะฐััั:** ะะฐะฑะพัะฐะตั
- **ะกะบัะธะฟั ะทะฐะฟััะบะฐ:** `/root/LegalFlow/start_rag_api.sh`

### 2. โ QwenService ะพะฑะฝะพะฒะปะตะฝ
- ะะพะฑะฐะฒะปะตะฝ ะผะตัะพะด `getRAGContext()` ะดะปั ะฟะพะปััะตะฝะธั ะบะพะฝัะตะบััะฐ ะธะท RAG
- ะะตัะพะด `analyzeText()` ัะตะฟะตัั ะธัะฟะพะปัะทัะตั RAG ะฟะตัะตะด ะณะตะฝะตัะฐัะธะตะน ะพัะฒะตัะพะฒ
- ะัะพะผะฟั ะพะฑะฝะพะฒะปะตะฝ ะดะปั ะฒะบะปััะตะฝะธั ะบะพะฝัะตะบััะฐ ะธะท ะฑะฐะทั ะทะฝะฐะฝะธะน

### 3. โ Vite ะฟัะพะบัะธ ะฝะฐัััะพะตะฝ
- ะะพะฑะฐะฒะปะตะฝ ะฟัะพะบัะธ `/api/rag` โ `http://localhost:8002`
- ะะฐะฟัะพัั ะบ RAG API ะฟัะพัะพะดัั ัะตัะตะท ะฟัะพะบัะธ Vite

### 4. โ ะัะพะผะฟั ัะปัััะตะฝ
- ะะบะปััะฐะตั ะบะพะฝัะตะบัั ะธะท RAG ัะธััะตะผั
- ะะพะดะตะปั ะฟะพะปััะฐะตั ัะตะปะตะฒะฐะฝัะฝัั ะธะฝัะพัะผะฐัะธั ะธะท ะดะพะบัะผะตะฝัะพะฒ ะฟะตัะตะด ะณะตะฝะตัะฐัะธะตะน ะพัะฒะตัะฐ

## ๐ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโ
โ  blondinkaizakon    โ
โ  (React + Vite)     โ
โ  ะะพัั: 3000         โ
โโโโโโโโโโโโฌโโโโโโโโโโโ
           โ
           โ HTTP ะทะฐะฟัะพัั
           โ
โโโโโโโโโโโโผโโโโโโโโโโโ
โ   QwenService.ts    โ
โ                     โ
โ   1. ะะพะธัะบ ะฒ RAG    โ โ /api/rag/context
โ   2. ะคะพัะผะธัะพะฒะฐะฝะธะต   โ
โ      ะฟัะพะผะฟัะฐ        โ
โ   3. ะะตะฝะตัะฐัะธั      โ โ /api/qwen/generate
โโโโโโโโโโโโฌโโโโโโโโโโโ
           โ
           โโโโโโโโโโโโโโโโโโโ
           โ                 โ
โโโโโโโโโโโโผโโโโโโโโโโโ โโโโโผโโโโโโโโโโโโโ
โ   Qwen API          โ โ  RAG API       โ
โ   ะะพัั: 8001        โ โ  ะะพัั: 8002    โ
โ   ะะพะดะตะปั: Qwen2.5   โ โ  241 ะดะพะบัะผะตะฝั  โ
โโโโโโโโโโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโโโ
```

## ๐ ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั

1. **ะะพะปัะทะพะฒะฐัะตะปั ะพัะฟัะฐะฒะปัะตั ะทะฐะฟัะพั** ะฒ ะฟัะธะปะพะถะตะฝะธะต
2. **QwenService ะฟะพะปััะฐะตั ะทะฐะฟัะพั** (`analyzeText()`)
3. **ะะพะธัะบ ะฒ RAG:**
   - ะคะพัะผะธััะตััั ะฟะพะธัะบะพะฒัะน ะทะฐะฟัะพั ะธะท `levelDescription` ะธ `text`
   - ะัะฟัะฐะฒะปัะตััั ะทะฐะฟัะพั ะบ `/api/rag/context`
   - RAG API ะธัะตั ัะตะปะตะฒะฐะฝัะฝัะต ะดะพะบัะผะตะฝัั (k=3)
   - ะะพะทะฒัะฐัะฐะตััั ะบะพะฝัะตะบัั (ัะตะบัั ะธะท ะฝะฐะนะดะตะฝะฝัั ะดะพะบัะผะตะฝัะพะฒ)
4. **ะคะพัะผะธัะพะฒะฐะฝะธะต ะฟัะพะผะฟัะฐ:**
   - ะะพะฑะฐะฒะปัะตััั ะบะพะฝัะตะบัั ะธะท RAG
   - ะคะพัะผะธััะตััั ะฟะพะปะฝัะน ะฟัะพะผะฟั ั ะธะฝััััะบัะธัะผะธ ะดะปั ะผะพะดะตะปะธ
5. **ะะตะฝะตัะฐัะธั ะพัะฒะตัะฐ:**
   - ะัะฟัะฐะฒะปัะตััั ะทะฐะฟัะพั ะบ `/api/qwen/generate`
   - ะะพะดะตะปั ะณะตะฝะตัะธััะตั ะพัะฒะตั ะฝะฐ ะพัะฝะพะฒะต ะบะพะฝัะตะบััะฐ ะธะท RAG
   - ะัะฒะตั ะฟะฐััะธััั ะธ ะฒะพะทะฒัะฐัะฐะตััั ะฟะพะปัะทะพะฒะฐัะตะปั

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### ะัะพะฒะตัะบะฐ RAG API:
```bash
curl -X POST http://localhost:8002/context \
  -H "Content-Type: application/json" \
  -d '{"query": "ะดะพะณะพะฒะพั ะฟะพััะฐะฒะบะธ", "k": 3}'
```

### ะัะพะฒะตัะบะฐ Qwen API:
```bash
curl http://localhost:8001/health
```

### ะัะพะฒะตัะบะฐ ะฒ ะฑัะฐัะทะตัะต:
1. ะัะบัะพะนัะต ะฟัะธะปะพะถะตะฝะธะต
2. ะัะบัะพะนัะต DevTools (F12) โ Console
3. ะัะฟัะฐะฒััะต ัะพะพะฑัะตะฝะธะต ะฒ ัะฐั
4. ะะพะปะถะฝั ะฟะพัะฒะธัััั ะปะพะณะธ:
   - `๐ ะะพะธัะบ ะฒ RAG ัะธััะตะผะต ะดะปั ะทะฐะฟัะพัะฐ: ...`
   - `โ ะะพะปััะตะฝ ะบะพะฝัะตะบัั ะธะท RAG: ... ัะธะผะฒะพะปะพะฒ`
   - `๐ค ะัะฟัะฐะฒะบะฐ ะทะฐะฟัะพัะฐ ะบ Qwen API: ...`

## ๐ ะะฐัััะพะนะบะธ

### RAG API ะฟะพัั: 8002
### Qwen API ะฟะพัั: 8001
### ะัะธะปะพะถะตะฝะธะต ะฟะพัั: 3000

### ะะพะปะธัะตััะฒะพ ะดะพะบัะผะตะฝัะพะฒ ะธะท RAG: 3 (ะผะพะถะฝะพ ะธะทะผะตะฝะธัั ะฒ `getRAGContext()`)

## ๐ ะะฐะฟััะบ ัะธััะตะผั

### 1. ะะฐะฟัััะธัั Qwen API:
```bash
cd /root/qwen-model
./start_api.sh
```

### 2. ะะฐะฟัััะธัั RAG API:
```bash
cd /root/LegalFlow
./start_rag_api.sh
```

### 3. ะะฐะฟัััะธัั ะฟัะธะปะพะถะตะฝะธะต:
```bash
cd /root/blondinkaizakon
npm run dev
```

## โ๏ธ ะะฐะถะฝะพ

1. **RAG API ะดะพะปะถะตะฝ ะฑััั ะทะฐะฟััะตะฝ ะฟะตัะตะด ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ะฟัะธะปะพะถะตะฝะธั**
2. **ะัะปะธ RAG API ะฝะตะดะพัััะฟะตะฝ, ัะธััะตะผะฐ ะฟัะพะดะพะปะถะธั ัะฐะฑะพัั ะฑะตะท ะบะพะฝัะตะบััะฐ** (fallback)
3. **ะะพะธัะบ ะฒ RAG ะทะฐะฝะธะผะฐะตั ะดะพะฟะพะปะฝะธัะตะปัะฝะพะต ะฒัะตะผั** (~1-2 ัะตะบัะฝะดั)
4. **ะะพะฝัะตะบัั ะพะณัะฐะฝะธัะตะฝ 1500 ัะธะผะฒะพะปะฐะผะธ** ะดะปั ัะบะพะฝะพะผะธะธ ัะพะบะตะฝะพะฒ

## ๐ง ะฃะปัััะตะฝะธั ะฒ ะฑัะดััะตะผ

1. ะััะธัะพะฒะฐะฝะธะต ัะตะทัะปััะฐัะพะฒ RAG ะฟะพะธัะบะฐ
2. ะะฐัััะพะนะบะฐ ะบะพะปะธัะตััะฒะฐ ะดะพะบัะผะตะฝัะพะฒ ะฒ ะทะฐะฒะธัะธะผะพััะธ ะพั ัะธะฟะฐ ะทะฐะฟัะพัะฐ
3. ะัะธะพัะธัะธะทะฐัะธั ะดะพะบัะผะตะฝัะพะฒ ะฟะพ ัะตะปะตะฒะฐะฝัะฝะพััะธ
4. ะะพะฑะฐะฒะปะตะฝะธะต ะธััะพัะฝะธะบะพะฒ ะฒ ะพัะฒะตัั (ัััะปะบะธ ะฝะฐ ะดะพะบัะผะตะฝัั)

## โ ะกัะฐััั

- โ RAG API ะทะฐะฟััะตะฝ ะธ ัะฐะฑะพัะฐะตั
- โ ะะฝัะตะณัะฐัะธั ั QwenService ะทะฐะฒะตััะตะฝะฐ
- โ ะัะพะบัะธ ะฝะฐัััะพะตะฝ
- โ ะัะพะผะฟั ะพะฑะฝะพะฒะปะตะฝ
- โ ะกะธััะตะผะฐ ะณะพัะพะฒะฐ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั

